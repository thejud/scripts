#!/usr/bin/env python
"""discard most input, periodically printing a line to stderr

Sometimes I want to dev/null some output, but occasionally get some indication
that it was actually doing something. nullish will discard most of the input,
keeping only one in every n lines, and printing it to stderr.

EXAMPLES:
    seq 20 | nullish -n 5
        5
        10
        15
        20

Author: Jud Dagnall <jud@dagnall.net>

"""

import argparse
import fileinput
import sys

p = argparse.ArgumentParser(description='mostly dev null')
p.add_argument('-n', '--numlines', 
        help='print a line every n lines. Default: %(default)s', 
        type=int, default=1000)
p.add_argument('inputs', nargs='*', help="input files or stdin")
opts = p.parse_args()

for i, line in enumerate(fileinput.input(files=opts.inputs), 1):
    if i % opts.numlines == 0:
        sys.stderr.write(line)
